#!/bin/bash
# @Author: Shawn Schwartz - Stanford Memory Lab
# @Date: December 18, 2025
# @Description: Display diagnostic reports for a specific subject
# @Usage: ./show_diagnostics_for <subject_id>
# @Example: ./show_diagnostics_for 1302

# Check if subject ID was provided
if [ $# -eq 0 ]; then
    echo "Error: Subject ID required"
    echo "Usage: $0 <subject_id>"
    echo "Example: $0 1302"
    exit 1
fi

SUBJECT_ID=$1

# Use relative path from repo root
DIAGNOSTICS_DIR="logs/diagnostics"

if [ ! -d "${DIAGNOSTICS_DIR}" ]; then
    echo "Error: Diagnostics directory not found: ${DIAGNOSTICS_DIR}"
    echo "Make sure you're running this from the repository root"
    exit 1
fi

# Find and display diagnostic files matching the subject ID
find "${DIAGNOSTICS_DIR}" -type f -name "*${SUBJECT_ID}*" -exec echo "=========================================" \; -exec echo "File: {}" \; -exec echo "=========================================" \; -exec head -n 20 {} \; -exec echo "" \;
